<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Konten AI Harian - Enhanced</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Dark Mode Toggle -->
    <div class="theme-toggle" id="themeToggle">
        <i class="bi bi-moon-fill"></i>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-robot me-2"></i>AI Content Generator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-page="dashboard">
                            <i class="bi bi-speedometer2 me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="generator">
                            <i class="bi bi-magic me-1"></i>Generator
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="templates">
                            <i class="bi bi-file-earmark-text me-1"></i>Templates
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="saved">
                            <i class="bi bi-bookmark me-1"></i>Saved
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="scheduled">
                            <i class="bi bi-calendar-event me-1"></i>Scheduled
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="analytics">
                            <i class="bi bi-graph-up me-1"></i>Analytics
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Dashboard Section -->
    <div id="dashboard" class="page-section">
        <div class="header">
            <div class="container">
                <h1 class="text-center">Dashboard</h1>
                <p class="text-center mb-0">Overview dan statistik penggunaan aplikasi</p>
            </div>
        </div>

        <div class="container">
            <!-- Analytics Stats -->
            <div id="analyticsStats" class="mb-4">
                <!-- Stats will be rendered here -->
            </div>

            <!-- Quick Actions -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-lightning me-2"></i>Quick Actions</h5>
                        </div>
                        <div class="card-body">
                            <button class="btn btn-primary w-100 mb-2" onclick="navigateTo('generator')">
                                <i class="bi bi-magic me-2"></i>Generate New Content
                            </button>
                            <button class="btn btn-outline-primary w-100 mb-2" onclick="navigateTo('templates')">
                                <i class="bi bi-file-earmark-text me-2"></i>Browse Templates
                            </button>
                            <button class="btn btn-outline-success w-100" onclick="navigateTo('saved')">
                                <i class="bi bi-bookmark me-2"></i>View Saved Content
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-clock me-2"></i>Recent Activity</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                <span>Last generation: <span id="lastGenerated">-</span></span>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                                <i class="bi bi-calendar-check text-primary me-2"></i>
                                <span>Scheduled posts: <span id="scheduledCount">0</span></span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="bi bi-bookmark text-warning me-2"></i>
                                <span>Saved content: <span id="savedCount">0</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Content -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i>Recent Content</h5>
                </div>
                <div class="card-body">
                    <div id="recentContent">
                        <!-- Recent content will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Generator Section -->
    <div id="generator" class="page-section" style="display: none;">
    <div class="header">
        <div class="container">
            <h1 class="text-center">Generator Konten AI Harian</h1>
            <p class="text-center mb-0">Menghasilkan 3 thread tutorial AI unik setiap hari pukul 07.00 WIB</p>
        </div>
    </div>

    <div class="container">
        <div class="schedule-info">
            <div class="d-flex align-items-center">
                <i class="bi bi-clock-history me-2"></i>
                <div>
                    <strong>Jadwal Otomatis:</strong> Setiap hari pukul 07.00 WIB
                    <div class="small">Konten terakhir dihasilkan: <span id="lastGenerated">-</span></div>
                </div>
            </div>
        </div>

        <div class="api-section">
            <h4 class="mb-3">Pengaturan API Gemini 2.5 Flash</h4>
            <div class="row">
                <div class="col-md-8">
                    <div class="input-group mb-3">
                        <span class="input-group-text">API Key</span>
                        <input type="password" id="apiKey" class="form-control" placeholder="Masukkan API Key Gemini Anda">
                        <button class="btn btn-primary" id="saveApiKey">Simpan</button>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="d-flex align-items-center">
                        <span class="status-indicator" id="apiStatus"></span>
                        <span id="apiStatusText">Status API: Tidak terhubung</span>
                    </div>
                </div>
            </div>
            <div class="form-text">
                Dapatkan API Key dari <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>
            </div>
        </div>

        <div class="generate-section">
            <h4>Generate Konten AI Manual</h4>
            <p class="text-muted">Pilih topik dan klik tombol di bawah untuk generate konten baru secara manual</p>
            
            <div class="topic-selector">
                <div class="topic-badge active" data-topic="umum">AI Umum</div>
                <div class="topic-badge" data-topic="chatgpt">ChatGPT</div>
                <div class="topic-badge" data-topic="gambar">AI Gambar</div>
                <div class="topic-badge" data-topic="video">AI Video</div>
                <div class="topic-badge" data-topic="bisnis">AI untuk Bisnis</div>
                <div class="topic-badge" data-topic="pendidikan">AI untuk Pendidikan</div>
            </div>
            
            <button id="generateBtn" class="btn btn-primary btn-lg">
                <i class="bi bi-magic me-2"></i>Generate Konten Sekarang
            </button>
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                    <p class="mt-2">Sedang menghasilkan konten<span class="loading-dots"></span></p>
                </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h3 class="mb-4">Konten AI Hari Ini</h3>
                <div id="threadsContainer" class="thread-container">
                    <!-- Thread akan dimuat di sini -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Templates Section -->
    <div id="templates" class="page-section" style="display: none;">
        <div class="header">
            <div class="container">
                <h1 class="text-center">Template Gallery</h1>
                <p class="text-center mb-0">Pilih template untuk konten yang lebih terstruktur</p>
            </div>
        </div>

        <div class="container">
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-funnel me-2"></i>Filter Templates</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Platform</label>
                                <select class="form-select" id="platformFilter">
                                    <option value="">Semua Platform</option>
                                    <option value="facebook">Facebook</option>
                                    <option value="instagram">Instagram</option>
                                    <option value="twitter">Twitter</option>
                                    <option value="linkedin">LinkedIn</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Kategori</label>
                                <select class="form-select" id="categoryFilter">
                                    <option value="">Semua Kategori</option>
                                    <option value="business">Business</option>
                                    <option value="education">Education</option>
                                    <option value="technology">Technology</option>
                                    <option value="lifestyle">Lifestyle</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-plus-circle me-2"></i>Create Template</h5>
                        </div>
                        <div class="card-body">
                            <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#createTemplateModal">
                                <i class="bi bi-plus-circle me-2"></i>Create New Template
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="templateGallery" class="template-gallery">
                <!-- Templates will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Saved Content Section -->
    <div id="saved" class="page-section" style="display: none;">
        <div class="header">
            <div class="container">
                <h1 class="text-center">Saved Content</h1>
                <p class="text-center mb-0">Konten yang telah disimpan untuk digunakan kembali</p>
            </div>
        </div>

        <div class="container">
            <div id="savedContent">
                <!-- Saved content will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Scheduled Posts Section -->
    <div id="scheduled" class="page-section" style="display: none;">
        <div class="header">
            <div class="container">
                <h1 class="text-center">Scheduled Posts</h1>
                <p class="text-center mb-0">Kelola konten yang dijadwalkan untuk posting</p>
            </div>
        </div>

        <div class="container">
            <div class="row mb-4">
                <div class="col-md-12">
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#schedulePostModal">
                        <i class="bi bi-plus-circle me-2"></i>Schedule New Post
                    </button>
                </div>
            </div>
            <div id="scheduledPosts">
                <!-- Scheduled posts will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Analytics Section -->
    <div id="analytics" class="page-section" style="display: none;">
        <div class="header">
            <div class="container">
                <h1 class="text-center">Analytics</h1>
                <p class="text-center mb-0">Statistik dan analisis penggunaan aplikasi</p>
            </div>
        </div>

        <div class="container">
            <div id="analyticsStats" class="mb-4">
                <!-- Analytics stats will be rendered here -->
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-pie-chart me-2"></i>Topic Usage</h5>
                        </div>
                        <div class="card-body">
                            <div id="topicChart">
                                <!-- Chart will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Generation Trends</h5>
                        </div>
                        <div class="card-body">
                            <div id="trendChart">
                                <!-- Chart will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Create Template Modal -->
    <div class="modal fade" id="createTemplateModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Template</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createTemplateForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Template Name</label>
                                    <input type="text" class="form-control" id="templateName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Platform</label>
                                    <select class="form-select" id="templatePlatform" required>
                                        <option value="facebook">Facebook</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="twitter">Twitter</option>
                                        <option value="linkedin">LinkedIn</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="templateDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Hook Text</label>
                            <textarea class="form-control" id="templateHook" rows="2" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Prompts (one per line)</label>
                            <textarea class="form-control" id="templatePrompts" rows="5" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">CTA Text</label>
                            <textarea class="form-control" id="templateCTA" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createTemplate()">Create Template</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Post Modal -->
    <div class="modal fade" id="schedulePostModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Schedule Post</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="schedulePostForm">
                        <div class="mb-3">
                            <label class="form-label">Post Title</label>
                            <input type="text" class="form-control" id="postTitle" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Content</label>
                            <textarea class="form-control" id="postContent" rows="5" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Platform</label>
                            <select class="form-select" id="postPlatform" required>
                                <option value="facebook">Facebook</option>
                                <option value="instagram">Instagram</option>
                                <option value="twitter">Twitter</option>
                                <option value="linkedin">LinkedIn</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Schedule Date & Time</label>
                            <input type="datetime-local" class="form-control" id="postSchedule" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="schedulePost()">Schedule Post</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container">
        <div id="copyToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">Berhasil Disalin</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Teks telah disalin ke clipboard
            </div>
        </div>
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-danger text-white">
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="errorMessage">
                Terjadi kesalahan saat menghasilkan konten
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="features.js"></script>
    <script>
        // Navigation function
        function navigateTo(page) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            const targetSection = document.getElementById(page);
            if (targetSection) {
                targetSection.style.display = 'block';
            }
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page="${page}"]`).classList.add('active');
        }

        // Template creation
        function createTemplate() {
            const template = {
                id: 'template-' + Date.now(),
                name: document.getElementById('templateName').value,
                description: document.getElementById('templateDescription').value,
                platform: document.getElementById('templatePlatform').value,
                category: 'custom',
                content: {
                    hook: document.getElementById('templateHook').value,
                    prompts: document.getElementById('templatePrompts').value.split('\n').filter(p => p.trim()),
                    cta: document.getElementById('templateCTA').value
                }
            };
            
            templateManager.templates.push(template);
            templateManager.render();
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('createTemplateModal'));
            modal.hide();
            
            showToast('Template berhasil dibuat', 'success');
        }

        // Post scheduling
        function schedulePost() {
            const post = {
                title: document.getElementById('postTitle').value,
                content: document.getElementById('postContent').value,
                platform: document.getElementById('postPlatform').value,
                scheduledAt: document.getElementById('postSchedule').value
            };
            
            schedulingManager.schedule(post);
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('schedulePostModal'));
            modal.hide();
        }

        // Initialize navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Set default page
            navigateTo('dashboard');
            
            // Setup event listeners for navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateTo(e.target.getAttribute('data-page'));
                });
            });
        });
    </script>
</body>
</html>